{"ast":null,"code":"var _jsxFileName = \"/Users/rijvanmohd/myfranchise/adminportal/src/components/pages/Dashboard.js\";\nimport React, { useState, useEffect } from 'react';\nimport { Paper, Card, Typography, makeStyles, Button, Grid, Container, CssBaseline } from '@material-ui/core';\nimport PageHeader from '../common/PageHeader';\nimport PeopleOutlineTwoToneIcon from '@material-ui/icons/PeopleOutlineTwoTone';\nimport Dialog from '@material-ui/core/Dialog';\nimport SimpleCard from '../common/Card';\nimport AddSeller from '../accounts/AddSeller';\nimport { SellerAPI } from \"../../api/seller\";\nimport { ProductAPI } from \"../../api/seller\";\nimport ProductList from \"../common/ProductList\";\nimport { withSnackbar } from 'notistack';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst useStyles = makeStyles(theme => ({\n  root: {\n    flexGrow: 1,\n    backgroundColor: '#fdfdff'\n  },\n  paper: {\n    marginTop: theme.spacing(8),\n    display: 'flex',\n    flexDirection: 'row'\n  },\n  pageHeader: {\n    padding: theme.spacing(4),\n    display: 'flex',\n    marginBottom: theme.spacing(2),\n    [theme.breakpoints.down('sm')]: {\n      padding: theme.spacing(2)\n    }\n  },\n  pageIcon: {\n    display: 'inline-block',\n    padding: theme.spacing(2),\n    color: '#3c44b1',\n    height: 'fit-content'\n  },\n  pageTitle: {\n    paddingLeft: theme.spacing(4),\n    '& .MuiTypography-subtitle2': {\n      opacity: '0.6'\n    }\n  },\n  action: {\n    display: 'flex',\n    justifyContent: 'flex-end',\n    alignSelf: 'flex-end',\n    marginRight: theme.spacing(2),\n    [theme.breakpoints.down('sm')]: {\n      fontSize: '0.5rem'\n    }\n  },\n  card: {\n    display: 'flex',\n    justifyContent: 'center',\n    alignSelf: 'center'\n  },\n  cards: {\n    display: 'flex',\n    flexDirection: 'row',\n    marginTop: theme.spacing(2),\n    [theme.breakpoints.down('xs')]: {\n      flexDirection: 'column',\n      maxWidth: '100%'\n    }\n  },\n  text: {\n    [theme.breakpoints.down('sm')]: {\n      fontSize: '0.7rem'\n    }\n  },\n  title: {\n    margin: theme.spacing(2)\n  },\n  submit: {\n    margin: theme.spacing(3, 0, 2)\n  }\n}));\n\nfunction Dashboard(props) {\n  const [addSeller, setAddSeller] = useState(false);\n  const [openProducts, setOpenProducts] = useState(false);\n  const [sellers, setSellers] = useState([]);\n  const [products, setProducts] = useState([]);\n  const [currentSeller, setCurrentSeller] = useState({});\n  const classes = useStyles();\n  useEffect(() => {\n    if (!addSeller) {\n      getSellers();\n    }\n  }, [addSeller]);\n\n  const getSellers = () => {\n    SellerAPI.getAll().then(response => {\n      setSellers(response.data);\n    });\n  };\n\n  const getProducts = seller_id => {\n    ProductAPI.getBySeller(seller_id).then(response => {\n      console.log('response', response.data);\n\n      if (response.data.length > 0) {\n        setProducts(response.data);\n        setOpenProducts(true);\n      } else {\n        props.enqueueSnackbar('No Products Available', {\n          variant: 'warning'\n        });\n      }\n    });\n  };\n\n  const onProductClick = seller => {\n    console.log('dashboard seller', seller);\n    setCurrentSeller(seller);\n\n    if (seller.active_products > 0 || seller.sold_products > 0) {\n      getProducts(seller.id);\n    } else {\n      props.enqueueSnackbar('No Products Available', {\n        variant: 'warning'\n      });\n    }\n  };\n\n  const deleteSeller = seller_id => {\n    SellerAPI.delete(seller_id).then(response => {\n      console.log('response', response.data);\n\n      if (response.status === 201) {\n        props.enqueueSnackbar(response.data.message, {\n          variant: 'success'\n        });\n        getSellers();\n      }\n    }).catch(err => {\n      props.enqueueSnackbar(err.response.data.detail, {\n        variant: 'error'\n      });\n    });\n  };\n\n  const handleDelete = seller => {\n    setCurrentSeller({});\n    deleteSeller(seller.id);\n  };\n\n  const handleAddSeller = event => {\n    setAddSeller(true);\n  };\n\n  const handleClose = event => {\n    setAddSeller(false);\n    setOpenProducts(false);\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(CssBaseline, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(PageHeader, {\n      title: \"Franchise Admin\",\n      subTitle: \"Manage the sellers from here \",\n      icon: /*#__PURE__*/_jsxDEV(PeopleOutlineTwoToneIcon, {\n        fontSize: \"large\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 23\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Grid, {\n      container: true,\n      direction: \"column\",\n      children: /*#__PURE__*/_jsxDEV(Grid, {\n        item: true,\n        xs: 3,\n        className: classes.action,\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"contained\",\n          color: \"primary\",\n          className: classes.text,\n          onClick: handleAddSeller,\n          children: \"Add Seller\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Grid, {\n      container: true,\n      direction: \"row\",\n      spacing: 2,\n      className: classes.cards,\n      children: sellers && sellers.length > 0 ? sellers.map(seller => /*#__PURE__*/_jsxDEV(Grid, {\n        item: true,\n        xs: 12,\n        lg: 3,\n        md: 4,\n        sm: 6,\n        className: classes.card,\n        children: /*#__PURE__*/_jsxDEV(SimpleCard, {\n          seller: seller,\n          onProductClick: onProductClick,\n          onDelete: handleDelete\n        }, seller.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 179,\n          columnNumber: 25\n        }, this)\n      }, seller.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 21\n      }, this)) : /*#__PURE__*/_jsxDEV(Grid, {\n        item: true,\n        xs: 12,\n        lg: 3,\n        md: 4,\n        sm: 6,\n        className: classes.card,\n        children: /*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"No Sellers Added Yet\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 184,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 13\n    }, this), addSeller && /*#__PURE__*/_jsxDEV(Dialog, {\n      onClose: handleClose,\n      open: addSeller,\n      fullWidth: true,\n      children: /*#__PURE__*/_jsxDEV(AddSeller, {\n        setOpen: setAddSeller\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 17\n    }, this), openProducts && /*#__PURE__*/_jsxDEV(Dialog, {\n      onClose: handleClose,\n      open: openProducts,\n      fullWidth: true,\n      children: [/*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"h5\",\n        component: \"h3\",\n        className: classes.title,\n        children: [\"Seller Name - \", currentSeller.name]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(ProductList, {\n        rows: products\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true);\n}\n\nexport default withSnackbar(Dashboard);","map":{"version":3,"sources":["/Users/rijvanmohd/myfranchise/adminportal/src/components/pages/Dashboard.js"],"names":["React","useState","useEffect","Paper","Card","Typography","makeStyles","Button","Grid","Container","CssBaseline","PageHeader","PeopleOutlineTwoToneIcon","Dialog","SimpleCard","AddSeller","SellerAPI","ProductAPI","ProductList","withSnackbar","useStyles","theme","root","flexGrow","backgroundColor","paper","marginTop","spacing","display","flexDirection","pageHeader","padding","marginBottom","breakpoints","down","pageIcon","color","height","pageTitle","paddingLeft","opacity","action","justifyContent","alignSelf","marginRight","fontSize","card","cards","maxWidth","text","title","margin","submit","Dashboard","props","addSeller","setAddSeller","openProducts","setOpenProducts","sellers","setSellers","products","setProducts","currentSeller","setCurrentSeller","classes","getSellers","getAll","then","response","data","getProducts","seller_id","getBySeller","console","log","length","enqueueSnackbar","variant","onProductClick","seller","active_products","sold_products","id","deleteSeller","delete","status","message","catch","err","detail","handleDelete","handleAddSeller","event","handleClose","map","name"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,SAASC,KAAT,EAAgBC,IAAhB,EAAsBC,UAAtB,EAAkCC,UAAlC,EAA8CC,MAA9C,EAAsDC,IAAtD,EAA2DC,SAA3D,EAAsEC,WAAtE,QAAyF,mBAAzF;AACA,OAAOC,UAAP,MAAuB,sBAAvB;AACA,OAAOC,wBAAP,MAAqC,yCAArC;AACA,OAAOC,MAAP,MAAmB,0BAAnB;AACA,OAAOC,UAAP,MAAuB,gBAAvB;AACA,OAAOC,SAAP,MAAsB,uBAAtB;AACA,SAASC,SAAT,QAA0B,kBAA1B;AACA,SAASC,UAAT,QAA2B,kBAA3B;AACA,OAAOC,WAAP,MAAyB,uBAAzB;AACA,SAASC,YAAT,QAA6B,WAA7B;;;AAEA,MAAMC,SAAS,GAAGd,UAAU,CAACe,KAAK,KAAK;AACnCC,EAAAA,IAAI,EAAE;AACFC,IAAAA,QAAQ,EAAE,CADR;AAEFC,IAAAA,eAAe,EAAE;AAFf,GAD6B;AAKnCC,EAAAA,KAAK,EAAE;AACHC,IAAAA,SAAS,EAAEL,KAAK,CAACM,OAAN,CAAc,CAAd,CADR;AAEHC,IAAAA,OAAO,EAAE,MAFN;AAGHC,IAAAA,aAAa,EAAE;AAHZ,GAL4B;AAUnCC,EAAAA,UAAU,EAAC;AACPC,IAAAA,OAAO,EAACV,KAAK,CAACM,OAAN,CAAc,CAAd,CADD;AAEPC,IAAAA,OAAO,EAAC,MAFD;AAGPI,IAAAA,YAAY,EAACX,KAAK,CAACM,OAAN,CAAc,CAAd,CAHN;AAIP,KAACN,KAAK,CAACY,WAAN,CAAkBC,IAAlB,CAAuB,IAAvB,CAAD,GAAgC;AAC5BH,MAAAA,OAAO,EAACV,KAAK,CAACM,OAAN,CAAc,CAAd;AADoB;AAJzB,GAVwB;AAkBnCQ,EAAAA,QAAQ,EAAC;AACLP,IAAAA,OAAO,EAAC,cADH;AAELG,IAAAA,OAAO,EAACV,KAAK,CAACM,OAAN,CAAc,CAAd,CAFH;AAGLS,IAAAA,KAAK,EAAC,SAHD;AAILC,IAAAA,MAAM,EAAC;AAJF,GAlB0B;AAwBnCC,EAAAA,SAAS,EAAC;AACNC,IAAAA,WAAW,EAAClB,KAAK,CAACM,OAAN,CAAc,CAAd,CADN;AAEN,kCAA6B;AACzBa,MAAAA,OAAO,EAAC;AADiB;AAFvB,GAxByB;AA8BnCC,EAAAA,MAAM,EAAE;AACJb,IAAAA,OAAO,EAAC,MADJ;AAEJc,IAAAA,cAAc,EAAE,UAFZ;AAGJC,IAAAA,SAAS,EAAE,UAHP;AAIJC,IAAAA,WAAW,EAACvB,KAAK,CAACM,OAAN,CAAc,CAAd,CAJR;AAKJ,KAACN,KAAK,CAACY,WAAN,CAAkBC,IAAlB,CAAuB,IAAvB,CAAD,GAAgC;AAC5BW,MAAAA,QAAQ,EAAC;AADmB;AAL5B,GA9B2B;AAuCnCC,EAAAA,IAAI,EAAE;AACFlB,IAAAA,OAAO,EAAC,MADN;AAEFc,IAAAA,cAAc,EAAE,QAFd;AAGFC,IAAAA,SAAS,EAAE;AAHT,GAvC6B;AA4CnCI,EAAAA,KAAK,EAAE;AACHnB,IAAAA,OAAO,EAAC,MADL;AAEHC,IAAAA,aAAa,EAAC,KAFX;AAGHH,IAAAA,SAAS,EAACL,KAAK,CAACM,OAAN,CAAc,CAAd,CAHP;AAIH,KAACN,KAAK,CAACY,WAAN,CAAkBC,IAAlB,CAAuB,IAAvB,CAAD,GAAgC;AAC5BL,MAAAA,aAAa,EAAC,QADc;AAE5BmB,MAAAA,QAAQ,EAAC;AAFmB;AAJ7B,GA5C4B;AAqDnCC,EAAAA,IAAI,EAAE;AACF,KAAC5B,KAAK,CAACY,WAAN,CAAkBC,IAAlB,CAAuB,IAAvB,CAAD,GAAgC;AAC5BW,MAAAA,QAAQ,EAAC;AADmB;AAD9B,GArD6B;AA0DnCK,EAAAA,KAAK,EAAE;AACHC,IAAAA,MAAM,EAAC9B,KAAK,CAACM,OAAN,CAAc,CAAd;AADJ,GA1D4B;AA6DnCyB,EAAAA,MAAM,EAAE;AACJD,IAAAA,MAAM,EAAE9B,KAAK,CAACM,OAAN,CAAc,CAAd,EAAiB,CAAjB,EAAoB,CAApB;AADJ;AA7D2B,CAAL,CAAN,CAA5B;;AAmEA,SAAS0B,SAAT,CAAmBC,KAAnB,EAA0B;AACtB,QAAM,CAACC,SAAD,EAAYC,YAAZ,IAA4BvD,QAAQ,CAAC,KAAD,CAA1C;AACA,QAAM,CAACwD,YAAD,EAAeC,eAAf,IAAkCzD,QAAQ,CAAC,KAAD,CAAhD;AACA,QAAM,CAAC0D,OAAD,EAAUC,UAAV,IAAwB3D,QAAQ,CAAC,EAAD,CAAtC;AACA,QAAM,CAAC4D,QAAD,EAAWC,WAAX,IAA0B7D,QAAQ,CAAC,EAAD,CAAxC;AACA,QAAM,CAAC8D,aAAD,EAAgBC,gBAAhB,IAAoC/D,QAAQ,CAAC,EAAD,CAAlD;AACA,QAAMgE,OAAO,GAAG7C,SAAS,EAAzB;AAEAlB,EAAAA,SAAS,CAAC,MAAM;AACZ,QAAG,CAACqD,SAAJ,EAAc;AACVW,MAAAA,UAAU;AACb;AACJ,GAJQ,EAIN,CAACX,SAAD,CAJM,CAAT;;AAMA,QAAMW,UAAU,GAAG,MAAM;AACrBlD,IAAAA,SAAS,CAACmD,MAAV,GACKC,IADL,CACWC,QAAD,IAAY;AACdT,MAAAA,UAAU,CAACS,QAAQ,CAACC,IAAV,CAAV;AACH,KAHL;AAIH,GALD;;AAOA,QAAMC,WAAW,GAAIC,SAAD,IAAe;AAC/BvD,IAAAA,UAAU,CAACwD,WAAX,CAAuBD,SAAvB,EACKJ,IADL,CACWC,QAAD,IAAY;AACdK,MAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ,EAAuBN,QAAQ,CAACC,IAAhC;;AACA,UAAGD,QAAQ,CAACC,IAAT,CAAcM,MAAd,GAAuB,CAA1B,EAA6B;AACzBd,QAAAA,WAAW,CAACO,QAAQ,CAACC,IAAV,CAAX;AACAZ,QAAAA,eAAe,CAAC,IAAD,CAAf;AACH,OAHD,MAII;AACAJ,QAAAA,KAAK,CAACuB,eAAN,CAAsB,uBAAtB,EAA8C;AAAEC,UAAAA,OAAO,EAAE;AAAX,SAA9C;AACH;AAEJ,KAXL;AAYH,GAbD;;AAeA,QAAMC,cAAc,GAAIC,MAAD,IAAY;AAC/BN,IAAAA,OAAO,CAACC,GAAR,CAAY,kBAAZ,EAA+BK,MAA/B;AACAhB,IAAAA,gBAAgB,CAACgB,MAAD,CAAhB;;AACA,QAAGA,MAAM,CAACC,eAAP,GAAyB,CAAzB,IAA8BD,MAAM,CAACE,aAAP,GAAuB,CAAxD,EAA0D;AACtDX,MAAAA,WAAW,CAACS,MAAM,CAACG,EAAR,CAAX;AACH,KAFD,MAGI;AACA7B,MAAAA,KAAK,CAACuB,eAAN,CAAsB,uBAAtB,EAA8C;AAAEC,QAAAA,OAAO,EAAE;AAAX,OAA9C;AACH;AACJ,GATD;;AAWA,QAAMM,YAAY,GAAIZ,SAAD,IAAe;AAChCxD,IAAAA,SAAS,CAACqE,MAAV,CAAiBb,SAAjB,EACCJ,IADD,CACOC,QAAD,IAAY;AACdK,MAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ,EAAuBN,QAAQ,CAACC,IAAhC;;AACA,UAAGD,QAAQ,CAACiB,MAAT,KAAoB,GAAvB,EAA2B;AACvBhC,QAAAA,KAAK,CAACuB,eAAN,CAAsBR,QAAQ,CAACC,IAAT,CAAciB,OAApC,EAA4C;AAAET,UAAAA,OAAO,EAAE;AAAX,SAA5C;AACAZ,QAAAA,UAAU;AACb;AACJ,KAPD,EAQCsB,KARD,CAQOC,GAAG,IAAE;AACRnC,MAAAA,KAAK,CAACuB,eAAN,CAAsBY,GAAG,CAACpB,QAAJ,CAAaC,IAAb,CAAkBoB,MAAxC,EAA+C;AAAEZ,QAAAA,OAAO,EAAE;AAAX,OAA/C;AACH,KAVD;AAWH,GAZD;;AAcA,QAAMa,YAAY,GAAIX,MAAD,IAAY;AAC7BhB,IAAAA,gBAAgB,CAAC,EAAD,CAAhB;AACAoB,IAAAA,YAAY,CAACJ,MAAM,CAACG,EAAR,CAAZ;AACH,GAHD;;AAMA,QAAMS,eAAe,GAAIC,KAAD,IAAW;AAC/BrC,IAAAA,YAAY,CAAC,IAAD,CAAZ;AACH,GAFD;;AAIA,QAAMsC,WAAW,GAAID,KAAD,IAAW;AAC3BrC,IAAAA,YAAY,CAAC,KAAD,CAAZ;AACAE,IAAAA,eAAe,CAAC,KAAD,CAAf;AACH,GAHD;;AAIA,sBACI;AAAA,4BACI,QAAC,WAAD;AAAA;AAAA;AAAA;AAAA,YADJ,eAEI,QAAC,UAAD;AACI,MAAA,KAAK,EAAC,iBADV;AAEI,MAAA,QAAQ,EAAC,+BAFb;AAGI,MAAA,IAAI,eAAE,QAAC,wBAAD;AAA0B,QAAA,QAAQ,EAAC;AAAnC;AAAA;AAAA;AAAA;AAAA;AAHV;AAAA;AAAA;AAAA;AAAA,YAFJ,eAOI,QAAC,IAAD;AAAM,MAAA,SAAS,MAAf;AAAgB,MAAA,SAAS,EAAC,QAA1B;AAAA,6BACI,QAAC,IAAD;AAAM,QAAA,IAAI,MAAV;AAAW,QAAA,EAAE,EAAE,CAAf;AAAkB,QAAA,SAAS,EAAEO,OAAO,CAACxB,MAArC;AAAA,+BACI,QAAC,MAAD;AACI,UAAA,OAAO,EAAC,WADZ;AAEI,UAAA,KAAK,EAAC,SAFV;AAGI,UAAA,SAAS,EAAEwB,OAAO,CAAChB,IAHvB;AAII,UAAA,OAAO,EAAE2C,eAJb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,YAPJ,eAmBI,QAAC,IAAD;AAAM,MAAA,SAAS,MAAf;AAAgB,MAAA,SAAS,EAAC,KAA1B;AAAgC,MAAA,OAAO,EAAE,CAAzC;AAA4C,MAAA,SAAS,EAAE3B,OAAO,CAAClB,KAA/D;AAAA,gBACQY,OAAO,IAAIA,OAAO,CAACiB,MAAR,GAAiB,CAA5B,GACAjB,OAAO,CAACoC,GAAR,CAAYf,MAAM,iBAClB,QAAC,IAAD;AAAsB,QAAA,IAAI,MAA1B;AAA2B,QAAA,EAAE,EAAE,EAA/B;AAAmC,QAAA,EAAE,EAAE,CAAvC;AAA0C,QAAA,EAAE,EAAE,CAA9C;AAAiD,QAAA,EAAE,EAAE,CAArD;AAAwD,QAAA,SAAS,EAAEf,OAAO,CAACnB,IAA3E;AAAA,+BACI,QAAC,UAAD;AAAY,UAAA,MAAM,EAAEkC,MAApB;AAA4C,UAAA,cAAc,EAAED,cAA5D;AAA4E,UAAA,QAAQ,EAAEY;AAAtF,WAAiCX,MAAM,CAACG,EAAxC;AAAA;AAAA;AAAA;AAAA;AADJ,SAAWH,MAAM,CAACG,EAAlB;AAAA;AAAA;AAAA;AAAA,cADA,CADA,gBAOA,QAAC,IAAD;AAAM,QAAA,IAAI,MAAV;AAAW,QAAA,EAAE,EAAE,EAAf;AAAmB,QAAA,EAAE,EAAE,CAAvB;AAA0B,QAAA,EAAE,EAAE,CAA9B;AAAiC,QAAA,EAAE,EAAE,CAArC;AAAwC,QAAA,SAAS,EAAElB,OAAO,CAACnB,IAA3D;AAAA,+BACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA;AARR;AAAA;AAAA;AAAA;AAAA,YAnBJ,EAiCQS,SAAS,iBACT,QAAC,MAAD;AAAQ,MAAA,OAAO,EAAEuC,WAAjB;AAA8B,MAAA,IAAI,EAAEvC,SAApC;AAA+C,MAAA,SAAS,MAAxD;AAAA,6BACI,QAAC,SAAD;AAAW,QAAA,OAAO,EAAEC;AAApB;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,YAlCR,EAwCQC,YAAY,iBACZ,QAAC,MAAD;AAAQ,MAAA,OAAO,EAAEqC,WAAjB;AAA8B,MAAA,IAAI,EAAErC,YAApC;AAAkD,MAAA,SAAS,MAA3D;AAAA,8BACI,QAAC,UAAD;AAAY,QAAA,OAAO,EAAC,IAApB;AAAyB,QAAA,SAAS,EAAC,IAAnC;AAAwC,QAAA,SAAS,EAAEQ,OAAO,CAACf,KAA3D;AAAA,qCACmBa,aAAa,CAACiC,IADjC;AAAA;AAAA;AAAA;AAAA;AAAA,cADJ,eAII,QAAC,WAAD;AAAa,QAAA,IAAI,EAAEnC;AAAnB;AAAA;AAAA;AAAA;AAAA,cAJJ;AAAA;AAAA;AAAA;AAAA;AAAA,YAzCR;AAAA,kBADJ;AAoDH;;AAED,eAAe1C,YAAY,CAACkC,SAAD,CAA3B","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport { Paper, Card, Typography, makeStyles, Button, Grid,Container, CssBaseline } from '@material-ui/core'\nimport PageHeader from '../common/PageHeader';\nimport PeopleOutlineTwoToneIcon from '@material-ui/icons/PeopleOutlineTwoTone';\nimport Dialog from '@material-ui/core/Dialog';\nimport SimpleCard from '../common/Card';\nimport AddSeller from '../accounts/AddSeller';\nimport { SellerAPI } from \"../../api/seller\";\nimport { ProductAPI } from \"../../api/seller\";\nimport ProductList  from \"../common/ProductList\";\nimport { withSnackbar } from 'notistack';\n\nconst useStyles = makeStyles(theme => ({\n    root: {\n        flexGrow: 1,\n        backgroundColor: '#fdfdff',\n    },\n    paper: {\n        marginTop: theme.spacing(8),\n        display: 'flex',\n        flexDirection: 'row',\n    },\n    pageHeader:{\n        padding:theme.spacing(4),\n        display:'flex',\n        marginBottom:theme.spacing(2),\n        [theme.breakpoints.down('sm')]: {\n            padding:theme.spacing(2)\n        }\n    },\n    pageIcon:{\n        display:'inline-block',\n        padding:theme.spacing(2),\n        color:'#3c44b1',\n        height:'fit-content'\n    },\n    pageTitle:{\n        paddingLeft:theme.spacing(4),\n        '& .MuiTypography-subtitle2':{\n            opacity:'0.6'\n        }\n    },\n    action: {\n        display:'flex',\n        justifyContent: 'flex-end',\n        alignSelf: 'flex-end',\n        marginRight:theme.spacing(2),\n        [theme.breakpoints.down('sm')]: {\n            fontSize:'0.5rem'\n        }\n    },\n    card: {\n        display:'flex',\n        justifyContent: 'center',\n        alignSelf: 'center',\n    },\n    cards: {\n        display:'flex',\n        flexDirection:'row',\n        marginTop:theme.spacing(2),\n        [theme.breakpoints.down('xs')]: {\n            flexDirection:'column',\n            maxWidth:'100%'\n        },\n    },\n    text: {\n        [theme.breakpoints.down('sm')]: {\n            fontSize:'0.7rem'\n        }\n    },\n    title: {\n        margin:theme.spacing(2)\n    },\n    submit: {\n        margin: theme.spacing(3, 0, 2),\n        \n    }\n}))\n\nfunction Dashboard(props) {\n    const [addSeller, setAddSeller] = useState(false)\n    const [openProducts, setOpenProducts] = useState(false)\n    const [sellers, setSellers] = useState([])\n    const [products, setProducts] = useState([])\n    const [currentSeller, setCurrentSeller] = useState({})\n    const classes = useStyles();\n\n    useEffect(() => {\n        if(!addSeller){\n            getSellers()\n        }\n    }, [addSeller])\n\n    const getSellers = () => {\n        SellerAPI.getAll()\n            .then((response)=>{\n                setSellers(response.data)\n            })\n    }\n\n    const getProducts = (seller_id) => {\n        ProductAPI.getBySeller(seller_id)\n            .then((response)=>{\n                console.log('response',response.data)\n                if(response.data.length > 0 ){\n                    setProducts(response.data)\n                    setOpenProducts(true)\n                }\n                else{\n                    props.enqueueSnackbar('No Products Available',{ variant: 'warning' })\n                }\n                \n            })\n    }\n\n    const onProductClick = (seller) => {\n        console.log('dashboard seller',seller)\n        setCurrentSeller(seller)\n        if(seller.active_products > 0 || seller.sold_products > 0){\n            getProducts(seller.id)\n        }\n        else{\n            props.enqueueSnackbar('No Products Available',{ variant: 'warning' })\n        }\n    }\n\n    const deleteSeller = (seller_id) => {\n        SellerAPI.delete(seller_id)\n        .then((response)=>{\n            console.log('response',response.data)\n            if(response.status === 201){\n                props.enqueueSnackbar(response.data.message,{ variant: 'success' })\n                getSellers()\n            }  \n        })\n        .catch(err=>{\n            props.enqueueSnackbar(err.response.data.detail,{ variant: 'error' })\n        })\n    }\n\n    const handleDelete = (seller) => {\n        setCurrentSeller({})\n        deleteSeller(seller.id)\n    }\n\n\n    const handleAddSeller = (event) => {\n        setAddSeller(true)\n    }\n\n    const handleClose = (event) => {\n        setAddSeller(false)\n        setOpenProducts(false)\n    }\n    return (\n        <>\n            <CssBaseline/>\n            <PageHeader\n                title=\"Franchise Admin\"\n                subTitle=\"Manage the sellers from here \"\n                icon={<PeopleOutlineTwoToneIcon fontSize=\"large\" />}\n            />\n            <Grid container direction=\"column\">\n                <Grid item xs={3} className={classes.action}>\n                    <Button\n                        variant=\"contained\"\n                        color=\"primary\"\n                        className={classes.text}\n                        onClick={handleAddSeller}\n                    >\n                        Add Seller\n                    </Button>\n                </Grid>\n            </Grid>\n            <Grid container direction=\"row\" spacing={2} className={classes.cards}>\n                {   sellers && sellers.length > 0 ?\n                    sellers.map(seller=>(\n                    <Grid key={seller.id} item xs={12} lg={3} md={4} sm={6} className={classes.card}>\n                        <SimpleCard seller={seller} key={seller.id} onProductClick={onProductClick} onDelete={handleDelete}/>\n                    </Grid>\n                    ))\n                    :\n                    <Grid item xs={12} lg={3} md={4} sm={6} className={classes.card}>\n                        <h1>No Sellers Added Yet</h1>\n                    </Grid>\n                }\n            </Grid>\n            {\n                addSeller &&\n                <Dialog onClose={handleClose} open={addSeller} fullWidth>\n                    <AddSeller setOpen={setAddSeller}/>\n                </Dialog>\n            }\n\n            {\n                openProducts &&\n                <Dialog onClose={handleClose} open={openProducts} fullWidth>\n                    <Typography variant=\"h5\" component=\"h3\" className={classes.title}>\n                        Seller Name - {currentSeller.name}\n                    </Typography>\n                    <ProductList rows={products}/>\n                </Dialog>\n            }\n            {/* <AddSeller/> */}\n        </>\n    )\n}\n\nexport default withSnackbar(Dashboard)\n"]},"metadata":{},"sourceType":"module"}